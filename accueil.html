<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vivario</title>

  <link rel="stylesheet" href="style.css?v=3" />

  <style>
    /* Home premium (ne casse pas ton style.css) */
    .hero{
      display:grid;
      gap:14px;
      padding: 28px 24px;
      position: relative;
      overflow: hidden;
    }

    .hero::after{
      content:"";
      position:absolute;
      inset:-140px;
      background:
        radial-gradient(closest-side, rgba(120,160,255,.20), transparent 62%),
        radial-gradient(closest-side, rgba(120,255,210,.10), transparent 66%),
        radial-gradient(closest-side, rgba(255,255,255,.06), transparent 70%);
      filter: blur(18px);
      pointer-events:none;
      transform: translate3d(0,0,0);
      animation: floatGlow 10s ease-in-out infinite;
      opacity:.9;
    }

    @keyframes floatGlow{
      0%   { transform: translate3d(0,0,0) scale(1); }
      50%  { transform: translate3d(0,-10px,0) scale(1.02); }
      100% { transform: translate3d(0,0,0) scale(1); }
    }

    .heroTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      position:relative;
      z-index:1;
    }

    .pill{
      font-size:12px;
      padding:7px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.82);
      white-space:nowrap;
      user-select:none;
    }
    .pill.on{
      background: rgba(120,160,255,.18);
      border-color: rgba(120,160,255,.35);
    }

    .heroTitle{
      margin: 6px 0 0;
      font-size: 56px;
      letter-spacing: -0.8px;
      line-height:1;
      position:relative;
      z-index:1;
    }

    .subtitle{
      position:relative;
      z-index:1;
      color: rgba(234,240,255,.92);
      font-size:18px;
      line-height:1.55;
      margin-top: 6px;
      max-width: 58ch;
    }

    .microcopy{
      position:relative;
      z-index:1;
      color: rgba(234,240,255,.72);
      line-height:1.6;
      margin: 0;
    }

    .ctaRow{
      position:relative;
      z-index:1;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 4px;
    }

    .noteBox{
      position:relative;
      z-index:1;
      padding: 12px 12px;
      border-radius: 18px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.08);
      display:flex;
      gap:10px;
      align-items:flex-start;
      margin-top: 8px;
    }
    .noteIcon{
      font-size:18px;
      line-height:1;
      margin-top:2px;
      opacity:.95;
    }
    .noteText{
      margin:0;
      font-size:13px;
      line-height:1.5;
      color: rgba(234,240,255,.78);
    }

    .smallLinks{
      position:relative;
      z-index:1;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top: 6px;
    }
    .smallLinks a{
      color: rgba(234,240,255,.75);
      text-decoration:none;
      font-size: 13px;
      border-bottom: 1px dashed rgba(255,255,255,.22);
      padding-bottom: 2px;
    }
    .smallLinks a:hover{
      color: rgba(234,240,255,.92);
      border-bottom-color: rgba(255,255,255,.35);
    }
  </style>
</head>

<body class="page-home">
  <main class="wrap">
    <section class="card home-card hero">
      <div class="heroTop">
        <div class="pill" id="ambState">Ambiance : OFF</div>
        <div class="pill">v1.1</div>
      </div>

      <h1 class="heroTitle">Vivario</h1>

      <p class="subtitle" id="welcomeLine">
        Un espace simple, doux et confidentiel pour faire le point.
      </p>

      <p class="microcopy">
        2 Ã  4 minutes. Des questions claires. Des scÃ©narios qui sâ€™adaptent Ã  tes rÃ©ponses.
      </p>

      <div class="ctaRow">
        <a class="btn primary" href="questionnaire.html?v=3">Entrer dans Vivario</a>
        <a class="btn ghost" href="apropos.html?v=3">Ã€ propos</a>
      </div>

      <div class="noteBox">
        <div class="noteIcon">ðŸ”’</div>
        <p class="noteText">
          Tes rÃ©ponses restent sur <b>ton appareil</b>. Personne ne peut les voir. Pas mÃªme Vivario.<br>
          Le bouton ðŸ”‡/ðŸ”Š en bas Ã  droite active une ambiance <b>optionnelle</b> (OFF par dÃ©faut).
        </p>
      </div>

      <div class="smallLinks">
        <a href="questionnaire.html?v=3">Commencer sans rÃ©flÃ©chir</a>
        <a href="avis.html?v=3">Donner un avis</a>
      </div>
    </section>
  </main>

  <!-- âœ… IMPORTANT : mÃªme version partout -->
  <script src="sound.js?v=7"></script>

  <script>
    function refreshAmb(){
      const el = document.getElementById("ambState");
      const on = window.VivarioSound?.isOn?.() === true;
      el.textContent = "Ambiance : " + (on ? "ON" : "OFF");
      el.classList.toggle("on", on);
    }

    // Petite phrase dâ€™accueil â€œvivanteâ€ (pas de dÃ©duction, juste une rotation douce)
    const lines = [
      "Un espace simple, doux et confidentiel pour faire le point.",
      "Tu peux venir mÃªme si â€œÃ§a vaâ€, juste pour te situer.",
      "Ici, tu nâ€™as rien Ã  prouver. Juste Ã  respirer un peu."
    ];

    document.addEventListener("DOMContentLoaded", () => {
      refreshAmb();

      const el = document.getElementById("welcomeLine");
      if (el) {
        const pick = lines[Math.floor(Math.random() * lines.length)];
        el.textContent = pick;
      }

      document.addEventListener("visibilitychange", () => {
        if (document.visibilityState === "visible") refreshAmb();
      });

      window.addEventListener("pointerdown", () => {
        setTimeout(refreshAmb, 80);
      }, { passive:true });
    });
  </script>
</body>
</html>